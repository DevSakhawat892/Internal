@using TUSO.Domain.Entities
@model TUSO.Domain.Entities.UserAccount

@{
   ViewData["Title"] = "User account";
   Layout = "~/Views/Shared/_Layout.cshtml";

   var roles = ViewBag.RoleList as List<Role> ?? new List<Role>();
   var countries = ViewBag.CountryList as List<Country> ?? new List<Country>();
   var provinces = ViewBag.ProvinceList as List<Province> ?? new List<Province>();
   var districts = ViewBag.DistrictList as List<District> ?? new List<District>();
   var facilities = ViewBag.FacilityList as List<Facility> ?? new List<Facility>();
   var departments = ViewBag.DepartmentList as List<Department> ?? new List<Department>();
   var designations = ViewBag.DesignationList as List<Designation> ?? new List<Designation>();
}

<script src="/app-assets/vendors/js/jquery/jquery.min.js"></script>
<script src="/js/userAccount.js"></script>

<!-- BEGIN: Content-->
<div class="app-content content ">
   <div class="content-overlay"></div>
   <div class="header-navbar-shadow"></div>
   <div class="content-wrapper container-xxl p-0">
      <div class="content-header row">
         <div class="content-header-left col-md-9 col-12 mb-2">
            <div class="row breadcrumbs-top">
               <div class="col-12">
                  <div class="breadcrumb-wrapper">
                     <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                           <a href="/UserAccount/Index">Users</a>
                        </li>

                        <li class="breadcrumb-item active"> Update User Account</li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <div class="content-body">
         <div class="px-2">
            <div class="auth-inner my-2">

               <!-- Register basic -->
               <div class="card mb-0 col-md-10 offset-1">
                  <div class="card-body">
                     <a href="#" class="brand-logo">
                        <svg viewbox="0 0 139 95"
                             version="1.1"
                             xmlns="http://www.w3.org/2000/svg"
                             xmlns:xlink="http://www.w3.org/1999/xlink"
                             height="28">
                           <defs>
                              <lineargradient id="linearGradient-1" x1="100%" y1="10.5120544%" x2="50%" y2="89.4879456%">
                                 <stop stop-color="#000000" offset="0%"></stop>
                                 <stop stop-color="#FFFFFF" offset="100%"></stop>
                              </lineargradient>
                              <lineargradient id="linearGradient-2" x1="64.0437835%" y1="46.3276743%" x2="37.373316%" y2="100%">
                                 <stop stop-color="#EEEEEE" stop-opacity="0" offset="0%"></stop>
                                 <stop stop-color="#FFFFFF" offset="100%"></stop>
                              </lineargradient>
                           </defs>
                           <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                              <g id="Artboard" transform="translate(-400.000000, -178.000000)">
                                 <g id="Group" transform="translate(400.000000, 178.000000)">
                                    <path class="text-primary"
                                          id="Path"
                                          d="M-5.68434189e-14,2.84217094e-14 L39.1816085,2.84217094e-14 L69.3453773,32.2519224 L101.428699,2.84217094e-14 L138.784583,2.84217094e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L6.71554594,44.4188507 C2.46876683,39.9813776 0.345377275,35.1089553 0.345377275,29.8015838 C0.345377275,24.4942122 0.230251516,14.560351 -5.68434189e-14,2.84217094e-14 Z"></path>
                                    <path id="Path1"
                                          d="M69.3453773,32.2519224 L101.428699,1.42108547e-14 L138.784583,1.42108547e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L32.8435758,70.5039241 L69.3453773,32.2519224 Z"
                                          fill="url(#linearGradient-1)"
                                          opacity="0.2">
                                    </path>
                                    <polygon id="Path-2"
                                             fill="#000000"
                                             opacity="0.049999997"
                                             points="69.3922914 32.4202615 32.8435758 70.5039241 54.0490008 16.1851325"></polygon>
                                    <polygon id="Path-21"
                                             fill="#000000"
                                             opacity="0.099999994"
                                             points="69.3922914 32.4202615 32.8435758 70.5039241 58.3683556 20.7402338"></polygon>
                                    <polygon id="Path-3"
                                             fill="url(#linearGradient-2)"
                                             opacity="0.099999994"
                                             points="101.428699 0 83.0667527 94.1480575 130.378721 47.0740288"></polygon>
                                 </g>
                              </g>
                           </g>
                        </svg>
                        <h2 class="brand-text text-primary ms-1">Tuso</h2>
                     </a>

                     <h4 class="card-title mb-1 text-center">Update User Account</h4>

                     <!---FORM START--->
                     <form class="auth-register-form mt-2" asp-action="Edit" asp-controller="UserAccount" method="POST">
                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                         <input id="OID" type="hidden" asp-for="OID"/>

                        <div class="container">                       
                        <!--Name-->
                        <div class="row me-2 ms-2">
                           <div class="mb-1 pe-2 col-md-6 fw-bold">
                              <label class="form-label" asp-for="Name">Full Name</label>
                              <input asp-for="Name" value="@Model.Name" type="text" id="register-fullName" class="form-control" placeholder="Full Name" tabindex="1" autofocus>
                              <span asp-validation-for="Name" class="text-danger"></span>
                           </div>

                           <!--Surname-->
                           <div class="mb-1 ps-2 col-md-6 fw-bold">
                              <label class="form-label" asp-for="Surname">Surname</label>
                              <input asp-for="Surname" value="@Model.Surname" type="text" name="Surname" id="register-Surname" class="form-control" placeholder="Surname" tabindex="2" autofocus>
                              <span asp-validation-for="Surname" class="text-danger"></span>
                           </div>
                        </div>

                        <!--Username-->
                        <div class="row me-2 ms-2">
                            <div class="mb-1 pe-2 col-md-6 fw-bold">
                               <label asp-for="Username" class="form-label">Username</label>
                               <input type="text" asp-for="Username" class="form-control" id="Username" name="Username" placeholder="Username" aria-describedby="register-username" tabindex="4" />
                               <span asp-validation-for="Username" class="text-danger"></span>
                               <span id="username" class="text-danger"></span>
                            </div>

                            <!--Email-->
                            <div class="mb-1 ps-2 col-md-6 fw-bold">
                               <label for="Email" class="form-label">Email</label>
                               <input type="text" asp-for="Email" class="form-control" id="Email" name="Email" placeholder="mail@example.com" aria-describedby="register-email" tabindex="4" />
                               <span asp-validation-for="Email" class="text-danger"></span>
                               <span id="emailValidation" class="text-danger"></span>
                            </div> 
                        </div>
                     
                        <!--Role-->
                        <div class="row me-2 ms-2">
                            <div class="mb-1 col-md-12 fw-bold">
                                <label for="Role" class="form-label">Role</label>
                               <select asp-for="RoleID" id="roleID" asp-items="@(new SelectList(roles,"OID","RoleName"))" class="form-select">
                                    <option value="">Select</option>
                               </select>
                               <span asp-validation-for="RoleID" class="text-danger"></span> 
                            </div>
                        </div>

                        <!--Country-->
                        <div class="row me-2 ms-2">
                            <div class="mb-1 col-md-12 fw-bold">
                                <label for="CountryID" class="form-label">Country</label>
                                <select for="CountryID" id="Country" asp-items="@(new SelectList(countries,"OID","CountryName"))"  class="form-select" onchange="ProvinceByCountry(event)">
                                    <option value="">Select</option>
                                </select>
                               <span for="CountryID" class="text-danger"></span> 
                            </div>
                        </div>

                        <!--Province-->
                        <div class="row me-2 ms-2">
                            <div class="mb-1 col-md-12 fw-bold">
                                <label for="ProvinceID" class="form-label">Province/Division</label>
                               <select for="ProvinceID" id="Province" class="form-select" onchange="DistrictByProvince(event)">
                                    <option value="">Select</option>
                                </select>
                               <span for="ProvinceID" class="text-danger"></span> 
                            </div>
                        </div>

                        <!--District-->
                        <div class="row me-2 ms-2">
                            <div class="mb-1 col-md-12 fw-bold">
                                <label for="DistrictID" class="form-label">District</label>
                                <select for="DistrictID" id="District" onchange="FacilityByDistrict(event)" class="form-select">
                                    <option value="">Select</option>
                                </select>
                               <span for="DistrictID" class="text-danger"></span> 
                            </div>
                        </div>

                        <!--Facility-->
                        <div class="row me-2 ms-2">
                             <div class="mb-1 col-md-12 fw-bold">
                                <label for="FacilityID" class="form-label">Health Facility</label>
                               <select for="FacilityID" id="Facility" asp-items="@(new SelectList(facilities,"OID","FacilityName"))" class="form-select">
                                    <option value="">Select</option>
                                </select>
                               <span for="FacilityID" class="text-danger"></span> 
                            </div>
                        </div>

                        <!--Department-->
                        <div class="row me-2 ms-2">
                             <div class="mb-1 col-md-12 fw-bold">
                                <label for="DepartmentID" class="form-label">Department</label>
                               <select for="DepartmentID" id="Department" asp-items="@(new SelectList(departments,"OID","DepartmentName"))" onchange="DesignationByDepartment(event)" class="form-select">
                                    <option value="">Select</option>
                                </select>
                               <span for="DepartmentID" class="text-danger"></span> 
                            </div>
                        </div>

                        <!--Designation-->
                        <div class="row me-2 ms-2">
                             <div class="mb-1 col-md-12 fw-bold">
                                <label asp-for="DesignationID" class="form-label">Designation</label>
                               <select asp-for="DesignationID" id="Designation" asp-items="@(new SelectList(designations,"OID","DesignationName"))" class="form-select">
                                    <option value="">Select</option>
                                </select>
                               <span asp-for="DesignationID" class="text-danger"></span> 
                            </div>
                        </div>

                        <!--CountryCode-->
                        <div class="row me-2 ms-2">
                           <div class="mb-1 pe-2 col-md-6 fw-bold">
                              <label class="form-label" asp-for="CountryCode">Country code</label>
                              <input asp-for="CountryCode" type="text" name="CountryCode" id="register-CountryCode" class="form-control" placeholder="Country Code" tabindex="1" autofocus>
                              <span asp-validation-for="CountryCode" class="text-danger"></span>
                           </div>

                           <div class="mb-1 ps-2 col-md-6 fw-bold">
                              <label class="form-label" asp-for="Cellphone">Cellphone</label>
                              <input asp-for="Cellphone" type="text" name="Cellphone" id="register-Cellphone" class="form-control" placeholder="Cellphone" tabindex="2" autofocus>
                              <span asp-validation-for="Cellphone" class="text-danger"></span>
                           </div>
                        </div>

                        <!--Password-->
                        <div class="row me-2 ms-2">
                            <div class="mb-1 col-md-12 fw-bold">
                               <label for="Password" class="form-label">Password</label>

                               <div class="input-group input-group-merge form-password-toggle">
                                  <input asp-for="Password" type="password" class="form-control form-control-merge" id="register-password" name="Password" placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;" aria-describedby="register-password" tabindex="6" />
                                  <span class="input-group-text cursor-pointer"><i data-feather="eye"></i></span>
                                  <span asp-validation-for="Password" class="text-danger"></span>
                               </div>
                            </div>
                        </div>

                        <!--ConfirmPassword-->
                        <div class="row me-2 ms-2">
                            <div class="mb-1 col-md-12 fw-bold">
                               <label for="ConfirmPassword" class="form-label">Confirm password</label>

                               <div class="input-group input-group-merge form-password-toggle">
                                  <input for="ConfirmPassword" type="password" class="form-control form-control-merge" id="register-password" name="ConfirmPassword" placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;" aria-describedby="register-password" tabindex="6" />
                                  <span class="input-group-text cursor-pointer"><i data-feather="eye"></i></span>
                                  <span validation-for="ConfirmPassword" class="text-danger"></span>
                               </div>
                            </div>                       
                        </div>

                        <div class="text-center mt-2 mb-1">
                            <button type="submit" role="button" id="btnSave" class="btn btn-primary waves-effect waves-float waves-light mx-2" tabindex="5">Update profile</button>
                            <a href="/UserAccount/Index" class="btn btn-secondary waves-effect waves-float waves-light" tabindex="5">Cancel</a>
                        </div>
                        </div>
                    </form>
                     <!---FORM END--->

                  </div>
               </div>
               <!-- /Register basic -->
            </div>
         </div>

      </div>
   </div>
</div>

<script>
   $(window).on('load', function() {
       if (feather) {
           feather.replace({ width: 14, height: 14 });
       }
   })
</script>

<script>
   
   function onlyNumberKey(evt) {

       // Only ASCII character in that range allowed
       var ASCIICode = (evt.which) ? evt.which : evt.keyCode
       if (ASCIICode > 31 && (ASCIICode < 48 || ASCIICode > 57))
           return false;
       return true;
   };


</script>
